# General settings
seed: 22
dry_run: False  # used for testing purposes; if True, then only one training iteration is performed

# Data settings:
data:
  slices_range: 100
  slices_per_view: 3  # cannot be changed; depends on the architecture input
  features_out: '/data_dzne_archiv2/Studien/ClinicNET/output/features/nifd_adni_aibl'
  quality_check: True
  col_names:  # the only columns that will be considered when reading clinical/file data
    - participant_id
    - session_id
    - diagnosis
    - age
    - sex
    - mmse
  valid_dataset_names: # valid names for datasets
    - NIFD
    - ADNI3
    - ADNI2
    - AIBL
    - OASIS
    - PPMI
  diagnoses_info:
    valid_diagnoses:
      - CON
      - BV
      - SV
      - PNFA
      - AD
      - MCI
      - CN
      - LMCI
      - EMCI
      - SMC
      - AD Dementia
      - Cognitively normal
      - PPMI # a dummy label for PPMI dataset (data with this label will not be used for linear evaluation)
    control_labels:
      - CON
      - CN
      - Cognitively normal
    ftd_labels:
      - BV
      - SV
      - PNFA
    merge_ftd: False  # will be encoded as 'FTD'
    ad_labels:  # will be encoded as 'AD'
      - AD Dementia
      - AD


# NNCLR settings:
nnclr:
  checkpoint: '/mnt/ssd2/ClinicNET/checkpoints/convnext_tiny_fine_tuned/'
  checkpoint_resume: '/mnt/ssd2/ClinicNET/checkpoints/convnext_tiny_fine_tuned/nnclr_epoch_300.ckpt'
  epochs: 200
  save_nepoch: 50  # a model will be saved every nth epoch
  batch_size: 128
  trainable_layers: 0  # only the last n nn.Sequential blocks and other layers afterwards will be trained
  data:
    # A list of the paths to the CAPS directories:
    - caps_directories:
      - '/mnt/ssd2/ClinicNET/data/nifd/CAPS/'
      - '/mnt/ssd2/ClinicNET/data/adni3/CAPS/'
      - '/mnt/ssd2/ClinicNET/data/adni2/CAPS/'
      - '/mnt/ssd2/ClinicNET/data/aibl/CAPS/'

    # A list of the paths to the TSV files containing targets/labels:
    - info_data_files:
      - '/mnt/ssd2/ClinicNET/data/nifd/info_data.tsv'
      - '/mnt/ssd2/ClinicNET/data/adni3/info_data.tsv'
      - '/mnt/ssd2/ClinicNET/data/adni2/info_data.tsv'
      - '/mnt/ssd2/ClinicNET/data/aibl/info_data.tsv'


# Setting for the linear evaluation of the NNCLR model:
linear_eval:
  checkpoint_load: '/mnt/ssd2/ClinicNET/checkpoints/efficientnetb3_fine_tuned/nnclr_epoch_1000.ckpt'
  checkpoint_save: '/mnt/ssd2/ClinicNET/checkpoints/efficientnetb3_top_layer/seed22/le.ckpt'
  epochs: 10
  batch_size: 32
  replicas: 100  # for each sample # replicas random slices are provided to predict a diagnosis
  replicas_extraction: 1  # extract # replicas_extraction random slices from each sample
  eval_labels:
    - CN
    - AD
    - BV
    - MCI

# Setting for the linear evaluation of the NNCLR model on the independent datasets:
independent_linear_eval:
  checkpoint: '/data_dzne_archiv2/Studien/ClinicNET/checkpoints/efficientnetb0_fine_tuned/nnclr_epoch_1000.ckpt'
  epochs: 10
  batch_size: 32
  replicas: 100  # for each sample # replicas random slices are provided to predict a diagnosis
  replicas_extraction: 1  # extract # replicas_extraction random slices from each sample
  data:
    # A list of the paths to the CAPS directories:
    - caps_directories:
      - '/data_dzne_archiv2/Studien/ClinicNET/data/oasis/CAPS/'
    # A list of the paths to the TSV files containing targets/labels:
    - info_data_files:
      - '/data_dzne_archiv2/Studien/ClinicNET/data/oasis/info_data.tsv'
  eval_labels:
    - CN
    - AD


# LRP settings:
lrp:
  is_train_set: False  # if True, then a train set will be used
  checkpoint: ''
  batch_size: 256
  classes: 2
